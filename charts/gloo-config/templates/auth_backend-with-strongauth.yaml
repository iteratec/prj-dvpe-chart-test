{{- define "auth_backend-with-strongauth" -}}
  {{- $values := index . 0 -}}
  {{- $ := index . 1 -}}
apiVersion: enterprise.gloo.solo.io/v1
kind: AuthConfig
metadata:
  name: {{ $values.authconfigname }}
  namespace: {{ $.Release.Namespace }}                       # your kubernetes namespace
spec:
  configs:
    - passThroughAuth:
        grpc:
          address: auth-passthrough-token-validation.gloo-system.svc.cluster.local:9001
        config:
            {{- /* TODO: Get URL*/}}
          openIdConfigurationUrl: {{ $values.openidurl }}
            {{- /* TODO: Configurable Level */}}
          strongAuthenticationLevel: 4000
      
  {{- if $values.headerextension }}
    - passThroughAuth:
        grpc:
            {{- /* TODO: Get URL*/}}
          address: auth-passthrough-token-validation.gloo-system.svc.cluster.local:9001
        config:
            {{- /* TODO: Get URL*/}}
          openIdConfigurationUrl: {{ $values.openidurl }}
          enableAccessTokenForwarding: {{ $.Values.defaults.passthru.enableAccessTokenForwarding }}
          enableSubjectForwarding: {{ $.Values.defaults.passthru.enableSubjectForwarding }}
          enableQAccountMatching: {{ $.Values.defaults.passthru.enableQAccountMatching }}
  {{- end }}
{{- end -}}

      